# Retry 어노테이션 구현
- Retry 로직 구현
    - AOP 활용
    - Expotional backoff 전략 구현
- Retry-AOP 테스트 코드
---
## 1. 개요
어플리케이션 내부에서 특정 서비스를 여러번 재시도가 필요한 경우는 뭐가 있을까?
우선 웹크롤링을 예로 들어보자. 대부분의 웹사이트의 경우, 동일한 ip에서 빠른시간내에
요청을 여러번 계속 보내면 TooManyRequst등의 오류로 응답이 올것이다. 일반적인
사용자까지 막으면 안되므로 크롤링 서비스를 제공하는 입장에선 어느정도의 간격을 두고
요청을 하도록 구현을 해놨을 것이다.\
다른 예로는 rest-api 서비스를 제공하는 업체들의 기본 가이드를 보면 월 제공량,
일일 제공량(RPM) 외로 시간당이나 분당(RPM) 최대 요청량을 제한(Quota)해놓는
경우가 있다. 이런 api 서비스를 이용하여 어플리케이션을 구축할때에는 사용자규모나
상황에 따라 api 요청 횟수를 제한해놔야 할 것이다.

## 2. 구현
구현 방법은 여러가지가 있을 수 있겠다. 특정 서비스를 thread 내부에 구현을 하고
sleep을 이용해서 요청을 할 수도 있고, 서비스 내부에 반복문으로 간격을 특정시간
을 주고도 구현할 수 있을 것이다. 허나, 규모가 커지고 여러 api들을 사용한다고
했을 때 비슷한 역할을 하는 코드들을 반복적으로 작성하는 것은 좋은 프로그래머가
되려면 지양해야 할 점인 것 같다. 스프링에서는 불필요한 코드를 줄여주는 어노테이션
기능을 많이 제공해주고 있고, 오픈소스 라이브러리에서도 어노테이션으로 제공해주는
경우(lombok, junit 등등)가 많다. 이에 커스텀 어노테이션으로 특정 서비스를
재시도 할 수 있게 구현해보려고 한다.

## 3. 필요 사전지식
- Annotation\
기존에 lombok이나 스프링 관련 어노테이션(controller, service 등등)을
현업에서 사용하고 있지만, 동작원리나 구현방식에 있어서는 전혀 지식이 없어, 관련
자료를 한번 찾아보고 진행하려고 한다.\
[Annotation 동작 원리와 사용법](https://hirlawldo.tistory.com/43)
- AOP\
AOP의 경우도 직접 구현해보거나 심도있게 다뤄보지 않아서 간단하게 개념정도 찾아보고
진행하려고 한다. AOP 관련해서는 따로 메인주제로 다뤄볼 예정이다.\
[Spring AOP 로거 개발 가이드](https://hirlawldo.tistory.com/31)
